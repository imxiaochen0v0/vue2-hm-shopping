"use strict";(self["webpackChunkhm_shopping"]=self["webpackChunkhm_shopping"]||[]).push([[259],{5578:function(t,s,a){a.d(s,{Z:function(){return r}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"CountBox"},[s("button",{staticClass:"minus",on:{click:t.handleSub}},[t._v("-")]),s("input",{staticClass:"inp",attrs:{type:"text"},domProps:{value:t.value},on:{change:t.change}}),s("button",{staticClass:"add",on:{click:t.handleAdd}},[t._v("+")])])},e=[],c={props:{value:{type:Number,default:1}},methods:{handleSub(){this.value<=1||this.$emit("input",this.value-1)},handleAdd(){this.$emit("input",this.value+1)},change(t){const s=+t.target.value;isNaN(s)||s<1||!Number.isInteger(s)?t.target.value=this.value:this.$emit("input",+t.target.value)}}},o=c,l=a(6967),n=(0,l.Z)(o,i,e,!1,null,"73215d0a",null),r=n.exports},7475:function(t,s,a){a.r(s),a.d(s,{default:function(){return h}});a(6484);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"cart"},[s("van-nav-bar",{attrs:{title:"购物车",fixed:""}}),s("div",{staticClass:"cart-title"},[s("span",{staticClass:"all"},[t._v("共"),s("i",[t._v(t._s(t.cartTotal))]),t._v("件商品")]),s("span",{staticClass:"edit"},[s("van-icon",{attrs:{name:"edit"},on:{click:function(s){t.show=!t.show}}}),t._v(" 编辑 ")],1)]),this.$store.getters.token&&t.cartList.length>0?s("div",[s("div",{staticClass:"cart-list"},t._l(t.cartList,(function(a){return s("div",{key:a.goods_id,staticClass:"cart-item"},[s("van-checkbox",{attrs:{value:a.isChecked,"checked-color":"pink"},on:{click:function(s){return t.toggleCheck(a.goods_id)}}}),s("div",{staticClass:"show",on:{click:function(s){return t.$router.push(`/proDetail/${a.goods_id}`)}}},[s("img",{attrs:{src:a.goods.goods_image,alt:""}})]),s("div",{staticClass:"info"},[s("span",{staticClass:"tit text-ellipsis-2"},[t._v(t._s(a.goods.goods_name))]),s("span",{staticClass:"bottom"},[s("div",{staticClass:"price"},[t._v("¥ "),s("span",[t._v(t._s(a.goods.goods_price_min))])]),s("div",{staticClass:"count-box"},[s("CountBox",{attrs:{value:a.goods_num},on:{input:s=>t.changeCart(s,a.goods_id,a.goods_sku_id)}})],1)])])],1)})),0)]):s("div",[s("van-empty",{attrs:{description:"购物车为空"}},[s("van-button",{staticClass:"bottom-button",attrs:{color:"pink",round:"",type:"danger"},on:{click:function(s){return t.$router.push("/")}}},[t._v("去逛逛")])],1)],1),s("div",{staticClass:"footer-fixed"},[s("div",{staticClass:"all-check",on:{click:t.toggleAllCheck}},[s("van-checkbox",{attrs:{"icon-size":"18",value:t.isAllChecked}}),t._v(" 全选 ")],1),s("div",{staticClass:"all-total"},[s("div",{staticClass:"price"},[s("span",[t._v("合计：")]),s("span",[t._v("¥ "),s("i",{staticClass:"totalPrice"},[t._v(t._s(t.cartActivePrice))])])]),t.show?s("div",{staticClass:"goPay",class:{disabled:0===t.cartActiveTotal},on:{click:function(s){return t.goPay()}}},[t._v("结算("+t._s(t.cartActiveTotal)+")")]):s("div",{staticClass:"delete",class:{disabled:0===t.cartActiveTotal},on:{click:t.handleDel}},[t._v("删除")])])])],1)},e=[],c=a(5578),o=a(8401),l={name:"CartPage",components:{CountBox:c.Z},data(){return{show:!0}},computed:{...(0,o.rn)("cart",["cartList"]),...(0,o.Se)("cart",["cartTotal","cartActive","cartActiveTotal","cartActivePrice","isAllChecked"])},created(){this.$store.getters.token&&this.$store.dispatch("cart/getCartAction")},methods:{toggleCheck(t){this.$store.commit("cart/toggleCheck",t)},toggleAllCheck(){this.$store.commit("cart/toggleAllCheck",!this.isAllChecked)},changeCart(t,s,a){this.$store.dispatch("cart/changeCartAction",{goodsNum:t,goodsId:s,goodsSkuId:a})},handleDel(){0!==this.cartActiveTotal&&(this.$store.dispatch("cart/delCartAction"),this.show=!0)},goPay(){this.cartActiveTotal>0&&this.$router.push({path:"/pay",query:{mode:"cart",cartIds:this.cartActive.map((t=>t.id)).join(",")}})}},watch:{show(t){!1===t?this.$store.commit("cart/toggleAllCheck",!1):this.$store.commit("cart/toggleAllCheck",!0)}}},n=l,r=a(6967),d=(0,r.Z)(n,i,e,!1,null,"2062c2f1",null),h=d.exports}}]);
//# sourceMappingURL=259.970ace44.js.map